Bootstrap: docker
From: nvcr.io/nvidia/pytorch:22.04-py3

%setup
    if [ ! -d nnUNet ]
    then
        git clone https://github.com/kevincoakley/nnUNet.git
    fi

    git -C nnUNet pull origin kc-main
    git -C nnUNet checkout c3f6d1d

%files
    nnUNet /opt/nnUNet

%post
    python3 -m pip install --no-cache-dir matplotlib pyyaml xmltodict
    python3 -m pip install -e /opt/nnUNet 

%labels
    Author kcoakley@sdsc.edu
    Version v1.0.1

%help
    nnU-Net (c3f6d1d) via nvcr.io/nvidia/pytorch:22.04-py3